# Playwright Tests для Планировщика

## Описание

Данный проект содержит комплексные Playwright тесты для приложения-планировщика задач. Тесты покрывают все основные функции приложения, включая работу с календарем, управление задачами, настройки и интеграционные сценарии.

## Структура тестов

### 1. `scheduler.spec.js` - Основные функции
- Загрузка приложения
- Генерация календаря
- Навигация по месяцам
- Выбор даты в календаре
- Отображение сегодняшнего дня
- Автоматический выбор текущего дня

### 2. `calendar.spec.js` - Функции календаря
- Структура календаря
- Отображение дней других месяцев
- Переключение между месяцами
- Выбор даты и изменение состояния
- Отображение текущего дня
- Отображение свободных часов
- Цветовая индикация загруженности дня
- Сохранение выбранной даты при навигации

### 3. `tasks.spec.js` - Управление задачами
- Создание простых задач
- Валидация обязательных полей
- Редактирование задач
- Удаление задач
- Завершение задач
- Создание повторяющихся задач (еженедельно, ежемесячно)
- Проверка пересечений задач
- Сохранение задач в localStorage
- Отображение прогресса текущей задачи
- Работа с временными слотами

### 4. `settings.spec.js` - Настройки приложения
- Открытие/закрытие модального окна настроек
- Изменение шага выбора времени (5, 10, 15, 30, 60 минут)
- Переключение темной темы
- Экспорт данных в JSON
- Импорт данных из JSON
- Валидация формата импортируемых данных
- Применение настроек после загрузки страницы
- Работа с уведомлениями

### 5. `integration.spec.js` - Интеграционные тесты
- Полный цикл работы с задачей (создание → редактирование → завершение → удаление)
- Взаимодействие настроек с интерфейсом
- Навигация по календарю с задачами
- Создание и отображение повторяющихся задач
- Экспорт и импорт с сохранением функциональности
- Пересчет свободного времени после операций с задачами
- Взаимодействие календаря и списка задач

## Установка и запуск

### Предварительные требования
```bash
npm install
npx playwright install
```

### Команды для запуска тестов

```bash
# Запуск всех тестов
npm test

# Запуск тестов с визуальным интерфейсом браузера
npm run test:headed

# Запуск тестов в режиме отладки
npm run test:debug

# Просмотр отчета о тестах
npm run test:report
```

### Запуск отдельных тестовых файлов
```bash
# Основные функции
npx playwright test scheduler.spec.js

# Календарь
npx playwright test calendar.spec.js

# Управление задачами
npx playwright test tasks.spec.js

# Настройки
npx playwright test settings.spec.js

# Интеграционные тесты
npx playwright test integration.spec.js
```

## Конфигурация

Тесты настроены для работы с:
- **Chromium** (Chrome)
- **Firefox** 
- **Webkit** (Safari)

Конфигурация находится в файле `playwright.config.js`.

## Особенности тестирования

### Очистка данных
Каждый тест начинается с очистки `localStorage` для обеспечения изолированности.

### Работа с модальными окнами
Тесты проверяют открытие/закрытие модальных окон, заполнение форм и валидацию данных.

### Асинхронные операции
Все тесты используют правильные ожидания (`await expect()`) для стабильной работы.

### Диалоги браузера
Тесты обрабатывают JavaScript alerts, confirms и промpts.

## Покрытие функциональности

Тесты покрывают:
- ✅ Загрузка и инициализация приложения
- ✅ Работа с календарем (навигация, выбор дат)
- ✅ Создание задач (простых и повторяющихся)
- ✅ Редактирование и удаление задач
- ✅ Завершение задач
- ✅ Проверка пересечений времени
- ✅ Настройки приложения
- ✅ Экспорт/импорт данных
- ✅ Переключение тем
- ✅ Сохранение в localStorage
- ✅ Отображение свободного времени
- ✅ Интеграционные сценарии

## Отчеты

После выполнения тестов создается HTML отчет с детальной информацией о результатах, включая:
- Статистику прохождения тестов
- Скриншоты при ошибках
- Трейсы выполнения
- Временные метрики

Отчет можно просмотреть командой `npm run test:report`.

## Рекомендации по расширению

При добавлении новых функций в приложение рекомендуется:

1. Добавлять соответствующие тесты в существующие файлы или создавать новые
2. Использовать data-testid атрибуты для надежной идентификации элементов
3. Тестировать как позитивные, так и негативные сценарии
4. Проверять состояние localStorage после операций
5. Добавлять интеграционные тесты для комплексных сценариев